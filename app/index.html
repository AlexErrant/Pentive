<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <link rel="shortcut icon" type="image/ico" href="/src/assets/favicon.ico" />
    <script>
      window.process = { env: { NODE_DEBUG: undefined } } // https://github.com/pouchdb/pouchdb/issues/8266
      window.global = window
    </script>

    <title>Solid App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <iframe
      id="secure-root"
      src="https://secure.local.pentive.com:3014/secure/index.html"
    ></iframe>
    <script src="/src/messenger.ts" type="module"></script>
    <script defer>
      function delay(time) {
        return new Promise((resolve) => setTimeout(resolve, time))
      }
      delay(1000).then(() => {
        var thrown = false
        try {
          document.getElementById("secure-root").contentWindow.document
        } catch (e) {
          thrown = true
        }
        if (!thrown) {
          throw new Error(
            "Parent page should not be able to access the contents of the Secure iframe!"
          )
        }
      })
    </script>
    <div id="root"></div>

    <script src="/src/index.tsx" type="module"></script>
  </body>
</html>
